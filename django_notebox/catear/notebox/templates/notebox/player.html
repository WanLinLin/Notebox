{% load staticfiles %}
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <!--Import materialize.css-->
  <link type="text/css" rel="stylesheet" href="{% static 'notebox/css/materialize.min.css' %}" media="screen,projection"/>
  <!-- my style -->
  <link rel="stylesheet" type="text/css" href="{% static 'notebox/css/player.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'notebox/css/general.css' %}">
</head>

<body>
  <!--====================================
  =            Include navbar            =
  =====================================-->
  {% include 'notebox/navbar.html' %}
  <!--====  End of Include navbar  ====-->
  
  <!--===============================
  =            Container            =
  ================================-->
  <div class="mao-main-wrapper">
    <!--==================================
    =            Video & Note            =
    ===================================-->
    <div class="mao-player-wrapper">
      <div class="">
        <div class="section row" style="margin-bottom: 0;">
          <!-- Video -->
          <div class="col s7 white-text mao-video-info">
            <div class="card-panel">
              <div class="video-container">
                <iframe width="420" height="315" src="https://www.youtube.com/embed/{{ song_yt_id }}" frameborder="0" allowfullscreen></iframe>
              </div>
              <!-- <a class="btn mao-simple-btn">AB 段重複</a>
              <a class="btn mao-simple-btn">影片速度</a> -->
            </div>

            <!-- Video Short Info -->
            <div class="card-panel mao-video-short-info">
              <!-- Info below -->
              <h5 style="display: inline;">{{ title }} - {{ artist }}</h5> 
              <p>
                <div class="chip mao-chip">{{ level }}</div>
                <div class="chip mao-chip">C</div>
                <div class="chip mao-chip">D</div>
                <div class="chip mao-chip">E</div>
                <div class="chip mao-chip">F</div>
                <div class="chip mao-chip">G</div>
                <div class="chip mao-chip">A</div>
                <div class="chip mao-chip">B</div>
              </p>
              <!-- Buttons -->
              <a class="btn modal-trigger mao-simple-btn"  href="#modal1"><i class="fa fa-check"></i> 演奏訣竅</a>
              <a class="btn mao-simple-btn"><i class="fa fa-heart-o"></i></a>
              <a class="btn mao-simple-btn"><i class="fa fa-facebook"></i></a>
              <a class="btn mao-simple-btn"><i class="fa fa-bug"></i></a>  
            </div>
          </div>
          <!-- Note -->
          <div class="col s5">
            <div class="card-panel center-align mao-music-sheet-wrapper">
              <!-- Note box -->
              <div id="mao-music-sheet-box" class="row mao-music-sheet-box">
                <!-- Tabs -->
                <div class="col s12">
                  <ul class="tabs">
                    <li class="tab col s3"><a href="#type1_note">鋼琴譜</a></li>
                    <li class="tab col s3"><a href="#type2_note">吉他譜</a></li>
                  </ul>
                </div>
                <!-- Tab content -->
                <div id="type1_note" class="col s12 mao-tab-content">
                  <div id="piano_score" class="vex-tabdiv" editor="true" editor_height="80"></div>
                  {% comment %}
                  Insert note here
                  {% endcomment %}
                  <!-- {{ note }} -->
                  <!-- <canvas id="mao-music-sheet" width="600" height="200"></canvas> -->
                </div>
                <div id="type2_note" class="col s12 mao-tab-content">
                  <div id="guitar_score" class="vex-tabdiv" editor="true" editor_height="80"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--====  End of Video & Note  ====-->

    <!--=====================================
    =            Description                =
    ======================================-->
    <!-- <div class="container">
      <h4>樂曲故事</h4>
      <p>{{ desc }}</p>
    </div> -->
    <!--====  End of Description      ====-->

    <!--=================================
    =            Playing Tips           =
    ==================================-->
    <div id="modal1" class="modal modal-fixed-footer">
      <div class="modal-content">
        <h4>教學及演奏訣竅</h4>
        <div class="divider"></div>
        <p>
          <div class="row valign-wrapper">
            <div class="col l7">
              Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eum ratione rem, sunt possimus eius cupiditate vel numquam reprehenderit voluptas! Voluptatem similique quidem repellat repudiandae ullam minima enim iure assumenda placeat!
            </div>
            <div class="col l5">
              <img class="responsive-img" src="http://placehold.it/350x200" alt="">
            </div>
          </div>
        </p>
        <p>
          <blockquote>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad, itaque ab! Eveniet corporis temporibus suscipit veniam, quibusdam repellendus fugiat facere, magni nostrum minima, sit assumenda, distinctio! Itaque consectetur sapiente voluptates.
          </blockquote>
        </p>
        <div class="section">
          <p>
            <i class="fa fa-check"></i>
            <span>Totam accusantium velit optio impedit, aliquam.</span>
          </p>
          <p>
            <i class="fa fa-times"></i>
            <span>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</span>
          </p>
          <p>
            <i class="fa fa-ban"></i>
            <span>Aspernatur optio molestiae cupiditate?</span>
          </p>
        </div>
        
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Libero, excepturi ullam alias, perspiciatis necessitatibus illo animi repudiandae laborum eveniet numquam esse voluptas incidunt ut id, iure veniam error earum. Qui.</p>
      </div>
      <div class="modal-footer">
        <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">OK!</a>
      </div>
    </div>
    <!--====  End of Playing Tips ====-->
    
    <!--==========================================
    =            Comment and Feedback            =
    ===========================================-->
   <!--  <div class="container">
      <div class="section">
        <h4>留言與回饋</h4>
        <div class="divider"></div>
        <p>
          <ul class="collection mao-comment-list">
            <li class="collection-item avatar">
              <img src="img/ph.png" alt="" class="circle">
              <span class="title">Bowan Kuo</span>
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Perspiciatis numquam eaque mollitia quos eveniet molestiae ex possimus iusto recusandae commodi, dolores aliquam vero officia temporibus, eligendi, id laudantium quibusdam distinctio?</p>
            </li>
            <li class="collection-item avatar">
              <img src="img/ph.png" alt="" class="circle">
              <span class="title">Yu Shan Zay</span>
              <p><span>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Voluptate quisquam expedita dolores ducimus, cum assumenda eaque dolor at, magni odio inventore.</span></p>
            </li>
            <li class="collection-item avatar">
              <img src="img/ph.png" alt="" class="circle">
              <span class="title">Wu Wang Wu</span>
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Perspiciatis numquam eaque mollitia quos eveniet molestiae ex possimus iusto recusandae commodi, dolores aliquam vero officia temporibus, eligendi, id laudantium quibusdam distinctio?</p>
            </li>
          </ul>
        </p>
      </div>
    </div> -->
    <!--====  End of Comment and Feedback  ====-->

    <!--====================================
    =            Recommanded Songs         =
    =====================================-->
    <div class="row">
      <div class="col m12" style="">
        <div class="card-panel">
          <h4>我們也推薦</h4>
          <div class="row">
            <div class="col l4 s12">
              <div class="card">
                <div class="card-image waves-effect waves-block waves-light">
                  <img src="http://placehold.it/350x200" alt="">
                  <a href="/notebox/player/{{ music.song_id }}" class="card-title black-bg-text activator">
                  Quis unde illum accusamus
                  </a>
                </div>
              </div>
            </div>
            <div class="col l4 s12">
              <div class="card">
                <div class="card-image waves-effect waves-block waves-light">
                  <img src="http://placehold.it/350x200" alt="">
                  <a href="/notebox/player/{{ music.song_id }}" class="card-title black-bg-text activator">
                  Quis unde illum accusamus
                  </a>
                </div>
              </div>
            </div>
            <div class="col l4 s12">
              <div class="card">
                <div class="card-image waves-effect waves-block waves-light">
                  <img src="http://placehold.it/350x200" alt="">
                  <a href="/notebox/player/{{ music.song_id }}" class="card-title black-bg-text activator">
                  Quis unde illum accusamus
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--====  End of Recommanded Songs  ====-->

  </div>
  <!--====  End of Container  ====-->


  <!--============================
  =            Footer            =
  =============================-->
  {% include 'notebox/footer.html' %}
  <!--====  End of Footer  ====-->
  
  
  <!--================================
  =            JavaScript            =
  =================================-->
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script type="text/javascript" src="{% static 'notebox/js/materialize.min.js' %}"></script>
  
  <script>
    /*=====================================
    =            Modal Handler            =
    =====================================*/
    $('.modal-trigger').leanModal();
    $('.button-collapse').sideNav();
    /*=====  End of Modal Handler  ======*/
    // Navbar dropdown setting
    $('.dropdown-button:contains("分類搜尋")').dropdown({
      inDuration: 300,
      constrain_width: false,
      outDuration: 225,
      hover: true, // Activate on hover
      belowOrigin: true,
      alignment: 'left'
    });

    var songChords = "{{ note }}";
    var songChordsArr = songChords.split(",");

    var musicString = '| ';
    for (var i = 0; i < songChordsArr.length; i++) {
      musicString += songChordsArr[i] + 'h ';

      if(i % 2 == 1 && i != songChordsArr.length) {
        musicString += '| ';
      }
    }
    musicString += '|';

  </script>

  <script type="text/javascript" src="{% static 'notebox/js/vextab/chords.js' %}"></script>
  <script type="text/javascript" src="{% static 'notebox/js/vextab/music_string_parser.js' %}"></script>
  <script type="text/javascript" src="{% static 'notebox/js/vextab/releases/vextab-div.js' %}"></script>

  <script type="text/javascript">

  $(document).ready(function(){
    initNotebox();

    // var $element = $("#mao-music-sheet-box");
    // var lastWidth = $("#mao-music-sheet-box").css('width');
    // function checkForChanges() {
    //   if ($element.css('width') != lastWidth) {
    //     // alert($('textarea .editor').val());
    //     alert("change");
    //   }

    //   setTimeout(checkForChanges, 500);
    // }

    $('#mao-music-sheet-box').bind('resize', function(){
      console.log('resized');
    });
  });
  
  /*=======================================
  =            note box height            =
  =======================================*/
  function initNotebox() {
    // Get height
    var height = $("div.mao-player-wrapper > div > div.section.row").height();
    console.log(height);
    $("div.mao-music-sheet-wrapper").height(height-40);
    $("div.mao-video-info").height(height);
  }
  /*=====  End of note box height  ======*/

  </script>

</body>
</html>